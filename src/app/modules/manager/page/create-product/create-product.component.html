<div class="container">
  <div class="title">Create and manage your product</div>
  <div class="subtitle">Please fill in the information below carefully. You will not be able to update it later.</div>
  <div class="content">
    <div class="left">
      <form class="form" [formGroup]="form" (ngSubmit)="submit()">
        <label for="uid">PRODUCT UID<i class="pi pi-info-circle"
            pTooltip="Note: The UID for this product is automatically generated by the system before product creation. You do not need to enter an UID in this field."></i></label>
        <input type="text" pInputText formControlName="uid" class="input-text1 uid" />



        <label for="name">NAME</label>
        <input type="text" pInputText formControlName="name" class="input-text1" />
        <small class="error"
          *ngIf="(form.controls['name'].touched || submitted) && (form.controls['name'].errors?.required || form.controls['name'].errors?.emptyString)">
          Name is required</small>

        <label for="category">CATEGORY</label>
        <input type="text" pInputText formControlName="category" class="input-text1" />
        <small class="error"
          *ngIf="(form.controls['category'].touched || submitted) && (form.controls['category'].errors?.required || form.controls['category'].errors?.emptyString)">
          Category is required</small>

        <label for="manufacturer">MANUFACTURER</label>
        <input type="text" pInputText formControlName="manufacturer" class="input-text1" />
        <small class="error"
          *ngIf="(form.controls['manufacturer'].touched || submitted) && (form.controls['manufacturer'].errors?.required || form.controls['manufacturer'].errors?.emptyString)">
          Manufacturer is required</small>

        <div class="dates">
          <div class="date">
            <label for="manufacturingDate">MANUFACTURING DATE</label>
            <p-calendar formControlName="manufacturingDate" dateFormat="dd-mm-yy" styleClass="calendar"
              [hideOnDateTimeSelect]="false" [showIcon]="true" (onSelect)="manufacturingDateSelected()">
            </p-calendar>
            <small class="error"
              *ngIf="(form.controls['manufacturingDate'].touched || submitted) && (form.controls['manufacturingDate'].errors?.required || form.controls['manufacturingDate'].errors?.emptyString)">
              Manufacturing date is required</small>
          </div>
          <div class="date">
            <label for="expiryDate">EXPIRY DATE</label>
            <p-calendar formControlName="expiryDate" dateFormat="dd-mm-yy" styleClass="calendar"
              [hideOnDateTimeSelect]="false" [showIcon]="true" [minDate]="expiryMinDate">
            </p-calendar>
            <small class="error"
              *ngIf="(form.controls['expiryDate'].touched || submitted) && (form.controls['expiryDate'].errors?.required || form.controls['expiryDate'].errors?.emptyString)">
              Expiry date is required</small>
          </div>
        </div>

        <label for="description">DESCRIPTION</label>
        <textarea rows="4" cols="30" pInputTextarea formControlName="description" class="input-textarea"></textarea>
        <small class="error"
          *ngIf="(form.controls['description'].touched || submitted) && (form.controls['description'].errors?.required || form.controls['description'].errors?.emptyString)">
          Description is required</small>

        <label for="derived">DERIVED FROM
          <i class="pi pi-info-circle" pTooltip="Add the uids of the products your new product is derived from"></i>
        </label>
        <div class="p-inputgroup">
          <input type="text" pInputText formControlName="parentUid" class="input-text1 parent-uid" />
          <button type="button" pButton icon="pi pi-plus" class="button-filled" (click)="addParentUid()"></button>
        </div>
        <div class="derived">
          <div class="derived-item" *ngFor="let parent of parents">
            <div class="derived-item-text">{{ parent.name }}</div>
            <button type="button" pButton icon="pi pi-trash" class="button-filled-reversed"
              (click)="removeParentUid(parent.uid)"></button>
          </div>
        </div>

        <p-dialog header="Confirm" [(visible)]="confirmDialogVisible" [modal]="true" [style]="{ width: '40vw' }"
          [draggable]="false" [resizable]="false" styleClass="dialog">
          <p class="text">The following qr code was generated for your product. Make sure to save it by clicking on it.
          </p>
          <qrcode #qr *ngIf="!form.controls['uid'].errors?.required" [qrdata]="form.controls['uid'].value!"
            [errorCorrectionLevel]="'M'" [allowEmptyString]="true" [width]="100" colorDark="#1D1927"
            colorLight="#FFF3FA" (click)="saveQr()" class="qrcode">
          </qrcode>
          <button type="button" pButton label="Confirm" class="button-outline" (click)="confirm()"
            [loading]="loading"></button>
        </p-dialog>

        <button type="submit" pButton label="Create" class="button-filled create-button" [loading]="loading"></button>
      </form>
    </div>
    <div class="right">
      <div class="title"><i class="pi pi-save"></i>Create a new product and join the traceability movement</div>
      <div class="text">
        Help us build a more transparent supply chain by creating a new product on our secure blockchain-based platform.
      </div>

      <div class="title"><i class="pi pi-chart-line"></i>Ensure product integrity from the start</div>
      <div class="text">
        By creating a new product on our dapp, you can ensure its authenticity and traceability throughout its entire
        journey.
      </div>

      <div class="title"><i class="pi pi-shopping-cart"></i>Empower consumers with product transparency</div>
      <div class="text">
        Create a new product and provide your customers with complete product history, building trust and loyalty.
      </div>

      <div class="title"><i class="pi pi-money-bill"></i>Protect your brand</div>
      <div class="text">
        Create a new product and ensure its authenticity and traceability throughout its entire journey.
      </div>
    </div>
  </div>
</div>
